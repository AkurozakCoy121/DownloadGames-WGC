<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UPGM - Universal Platform Game Market</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1E2A38;
            color: white;
        }
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 1rem;
        }
        .btn-primary {
            background-color: #FF6B35;
            color: white;
        }
        .btn-secondary {
            background-color: #3B4D61;
            color: white;
        }
        .input-field {
            background-color: #3B4D61;
            color: white;
            border-color: #3B4D61;
        }
        .input-field:focus {
            border-color: #FF6B35;
            outline: none;
            box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.5);
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .youtube-embed {
            aspect-ratio: 16 / 9;
        }
        .card-shadow {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
        }
        /* Custom Modal Styles */
        .modal {
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: none; /* Hidden by default */
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: #2A3749;
            padding: 24px;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
            text-align: center;
        }
        .modal-close {
            float: right;
            cursor: pointer;
            font-size: 24px;
            line-height: 1;
        }
    </style>
</head>
<body class="bg-[#1E2A38] text-white">

    <!-- Global state variables -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInWithCustomToken, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, addDoc, setDoc, updateDoc, onSnapshot, collection, query, where } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global variables provided by the environment
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        window.db = db;
        window.auth = auth;
        window.appId = appId;
        window.isLoggedIn = false;
        window.userId = null;
        window.currentUserEmail = null;
        window.currentPage = 'home';
        window.gameDetailId = null;
        window.userGamesUnsubscribe = null;

        // Custom Modal Functions
        window.showModal = (message) => {
            document.getElementById('modal-message').textContent = message;
            document.getElementById('custom-modal').style.display = 'flex';
        };

        window.closeModal = () => {
            document.getElementById('custom-modal').style.display = 'none';
        };

        // Authentication State Listener
        onAuthStateChanged(auth, async (user) => {
            if (user && !user.isAnonymous) {
                // User is authenticated
                window.isLoggedIn = true;
                window.userId = user.uid;
                window.currentUserEmail = user.email;
                console.log("User logged in with ID:", window.userId);
                
                document.getElementById('login-btn').classList.add('hidden');
                document.getElementById('user-dashboard-btn').classList.remove('hidden');
                document.getElementById('upload-btn').classList.remove('hidden');
                document.getElementById('logout-btn').classList.remove('hidden');

                // Load user-specific data from the private collection
                if (window.userGamesUnsubscribe) {
                    window.userGamesUnsubscribe();
                }

                const userGamesRef = collection(db, `artifacts/${appId}/users/${user.uid}/games`);
                try {
                    window.userGamesUnsubscribe = onSnapshot(userGamesRef, (snapshot) => {
                        const games = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        renderUserDashboardGames(games);
                    }, (error) => {
                        // This handles the permission-denied error more gracefully
                        console.error("Error in user games snapshot listener:", error);
                        document.getElementById('user-dashboard-games').innerHTML = `<p class="text-red-400">Error loading your games. Please check your Firestore security rules.</p>`;
                    });
                } catch (e) {
                    console.error("Failed to set up user games listener:", e);
                    document.getElementById('user-dashboard-games').innerHTML = `<p class="text-red-400">Error loading your games. Please check your Firestore security rules.</p>`;
                }
            } else {
                // User is anonymous or logged out
                window.isLoggedIn = false;
                window.userId = null;
                window.currentUserEmail = null;
                console.log("User is logged out or anonymous.");
                document.getElementById('login-btn').classList.remove('hidden');
                document.getElementById('user-dashboard-btn').classList.add('hidden');
                document.getElementById('upload-btn').classList.add('hidden');
                document.getElementById('logout-btn').classList.add('hidden');
                
                // Unsubscribe from user-specific listener if it exists
                if (window.userGamesUnsubscribe) {
                    window.userGamesUnsubscribe();
                    window.userGamesUnsubscribe = null;
                }
            }
            renderPage(window.currentPage);
        });

        // Custom token sign-in
        if (initialAuthToken) {
            signInWithCustomToken(auth, initialAuthToken).catch(error => {
                console.error("Error signing in with custom token:", error);
                signInAnonymously(auth);
            });
        } else {
            signInAnonymously(auth);
        }
        
        // --- Core Functions ---
        window.renderPage = (pageName, data = null) => {
            window.currentPage = pageName;
            const sections = ['home-section', 'browse-section', 'game-detail-section', 'upload-section', 'login-signup-section', 'user-dashboard-section'];
            sections.forEach(section => document.getElementById(section).classList.add('hidden'));

            let pageId = `${pageName}-section`;
            if (pageName === 'game-detail' && data) {
                pageId = 'game-detail-section';
                window.gameDetailId = data;
                renderGameDetail(data);
            }
            document.getElementById(pageId).classList.remove('hidden');

            if (pageName === 'user-dashboard' && window.isLoggedIn) {
                document.getElementById('user-id-display').textContent = window.userId;
                document.getElementById('user-email-display').textContent = window.currentUserEmail;
            }
        };

        const renderGameDetail = async (gameId) => {
            const gameDocRef = doc(db, `artifacts/${appId}/public/data/games`, gameId);
            onSnapshot(gameDocRef, (doc) => {
                if (doc.exists()) {
                    const gameData = doc.data();
                    document.getElementById('game-title').textContent = gameData.title;
                    document.getElementById('game-cover').src = gameData.coverUrl;
                    document.getElementById('game-cover').onerror = () => document.getElementById('game-cover').src = 'https://placehold.co/1000x500/3B4D61/white?text=Image+Not+Found';
                    document.getElementById('game-description').textContent = gameData.description;
                    document.getElementById('game-price').textContent = gameData.price === 'Free' ? 'Free' : `Rp ${gameData.price}`;
                    document.getElementById('download-btn-link').href = gameData.fileUrl;
                    document.getElementById('download-btn-link').textContent = gameData.price === 'Free' ? 'Download Now' : 'Buy Now';
                    document.getElementById('game-developer-id').textContent = `Developer ID: ${gameData.developerId}`;

                    const screenshotsContainer = document.getElementById('game-screenshots');
                    screenshotsContainer.innerHTML = '';
                    gameData.screenshots.forEach(url => {
                        const img = document.createElement('img');
                        img.src = url;
                        img.onerror = () => img.src = 'https://placehold.co/400x225/3B4D61/white?text=Image+Not+Found';
                        img.className = 'w-full h-auto rounded-lg';
                        screenshotsContainer.appendChild(img);
                    });

                    const videoContainer = document.getElementById('game-trailer');
                    if (gameData.videoUrl) {
                        videoContainer.innerHTML = `<iframe class="w-full h-full rounded-lg" src="${gameData.videoUrl}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
                    } else {
                        videoContainer.innerHTML = `<div class="w-full h-full rounded-lg bg-gray-700 flex items-center justify-center">No Trailer Available</div>`;
                    }
                } else {
                    console.error("No such document!");
                }
            });
        };

        const renderGameCards = (games, containerId) => {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            games.forEach(game => {
                const gameCard = document.createElement('div');
                gameCard.className = 'card-shadow bg-[#2A3749] rounded-lg p-3 transition-transform transform hover:scale-105 cursor-pointer';
                gameCard.onclick = () => renderPage('game-detail', game.id);
                gameCard.innerHTML = `
                    <img src="${game.coverUrl}" onerror="this.src='https://placehold.co/400x225/3B4D61/white?text=Image+Not+Found'" alt="${game.title} Cover" class="w-full h-48 object-cover rounded-lg mb-3">
                    <h3 class="text-lg font-semibold truncate">${game.title}</h3>
                    <p class="text-sm text-gray-400">${game.genre} | ${game.platform.join(', ')}</p>
                    <p class="text-lg font-bold text-[#FF6B35] mt-2">${game.price === 'Free' ? 'Free' : `Rp ${game.price}`}</p>
                `;
                container.appendChild(gameCard);
            });
        };

        // --- Event Listeners and Initial Data Fetching ---
        document.addEventListener('DOMContentLoaded', () => {
            // Navigation
            document.getElementById('home-btn').addEventListener('click', () => renderPage('home'));
            document.getElementById('browse-btn').addEventListener('click', () => renderPage('browse'));
            document.getElementById('upload-btn').addEventListener('click', () => renderPage('upload'));
            document.getElementById('user-dashboard-btn').addEventListener('click', () => renderPage('user-dashboard'));
            document.getElementById('login-btn').addEventListener('click', () => renderPage('login-signup'));
            document.getElementById('logout-btn').addEventListener('click', () => signOut(auth));
            document.getElementById('dashboard-logout-btn').addEventListener('click', () => signOut(auth));


            // Home & Browse Games Fetching
            const publicGamesRef = collection(db, `artifacts/${appId}/public/data/games`);
            const q = query(publicGamesRef, where('status', '==', 'approved'));
            onSnapshot(q, (snapshot) => {
                const games = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                renderGameCards(games.slice(0, 8), 'home-showcase');
                renderGameCards(games, 'browse-grid');
            });
        });

        // Login/Signup Logic
        document.getElementById('login-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = e.target.email.value;
            const password = e.target.password.value;
            try {
                await signInWithEmailAndPassword(auth, email, password);
                renderPage('home');
            } catch (error) {
                console.error("Login failed:", error.message);
                showModal("Login failed: " + error.message);
            }
        });

        document.getElementById('signup-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = e.target.email.value;
            const password = e.target.password.value;
            try {
                await createUserWithEmailAndPassword(auth, email, password);
                renderPage('home');
            } catch (error) {
                console.error("Signup failed:", error.message);
                showModal("Signup failed: " + error.message);
            }
        });
        document.getElementById('toggle-signup').addEventListener('click', () => {
            document.getElementById('login-form').classList.add('hidden');
            document.getElementById('signup-form').classList.remove('hidden');
        });
        document.getElementById('toggle-login').addEventListener('click', () => {
            document.getElementById('signup-form').classList.add('hidden');
            document.getElementById('login-form').classList.remove('hidden');
        });

        // Upload Game Logic
        document.getElementById('upload-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const form = e.target;
            const screenshots = form.screenshots.value.split(',').map(s => s.trim()).filter(s => s.length > 0);
            const platforms = Array.from(form.querySelectorAll('input[name="platform[]"]:checked')).map(p => p.value);
            const tags = form.tags.value.split(',').map(t => t.trim()).filter(t => t.length > 0);
            
            // Basic URL validation
            const isValidUrl = (url) => {
                try {
                    new URL(url);
                    return true;
                } catch (e) {
                    return false;
                }
            };
            if (!isValidUrl(form.coverUrl.value) || !isValidUrl(form.fileUrl.value)) {
                showModal("Please enter valid URLs for Cover and File.");
                return;
            }

            const newGame = {
                title: form.title.value,
                description: form.description.value,
                genre: form.genre.value,
                category: form.category.value,
                price: form.price.value,
                coverUrl: form.coverUrl.value,
                screenshots: screenshots,
                videoUrl: form.videoUrl.value,
                fileUrl: form.fileUrl.value,
                version: form.version.value,
                platform: platforms,
                size: form.size.value,
                tags: tags,
                developerId: window.userId,
                status: 'pending', // All new games are pending for admin review
                createdAt: new Date().toISOString(),
                rating: 0
            };

            try {
                // Save to private user collection
                await addDoc(collection(db, `artifacts/${appId}/users/${window.userId}/games`), newGame);
                showModal("Game uploaded successfully! It is now pending admin approval.");
                form.reset();
                renderPage('user-dashboard');
            } catch (error) {
                console.error("Error uploading game:", error);
                showModal("Error uploading game. Please try again.");
            }
        });

        // User Dashboard Logic
        const renderUserDashboardGames = (games) => {
            const container = document.getElementById('user-dashboard-games');
            container.innerHTML = '';
            if (games.length === 0) {
                container.innerHTML = `<p class="text-gray-400">You haven't uploaded any games yet.</p>`;
                return;
            }
            games.forEach(game => {
                const statusColor = game.status === 'approved' ? 'bg-green-500' : (game.status === 'pending' ? 'bg-yellow-500' : 'bg-red-500');
                const gameCard = document.createElement('div');
                gameCard.className = 'card-shadow bg-[#2A3749] rounded-lg p-3 flex items-center justify-between';
                gameCard.innerHTML = `
                    <div class="flex items-center space-x-4">
                        <img src="${game.coverUrl}" onerror="this.src='https://placehold.co/64x64/3B4D61/white?text=Img'" class="w-16 h-16 object-cover rounded-lg">
                        <div>
                            <h4 class="font-semibold">${game.title}</h4>
                            <p class="text-sm text-gray-400">${game.version}</p>
                            <div class="mt-1 px-2 py-1 text-xs font-bold text-white rounded-full ${statusColor}">${game.status.toUpperCase()}</div>
                        </div>
                    </div>
                    <div>
                        <button class="btn-primary text-sm px-4 py-2">Edit</button>
                    </div>
                `;
                container.appendChild(gameCard);
            });
        };

        // Browse page filtering
        document.getElementById('genre-filter').addEventListener('change', (e) => filterBrowseGames());
        document.getElementById('platform-filter').addEventListener('change', (e) => filterBrowseGames());
        document.getElementById('sort-by').addEventListener('change', (e) => filterBrowseGames());
        document.getElementById('browse-search').addEventListener('input', (e) => filterBrowseGames());

        const filterBrowseGames = () => {
            // This is a simple client-side filter. For a real app, this would be a Firestore query.
            const genre = document.getElementById('genre-filter').value;
            const platform = document.getElementById('platform-filter').value;
            const sort = document.getElementById('sort-by').value;
            const searchTerm = document.getElementById('browse-search').value.toLowerCase();

            const gamesRef = collection(db, `artifacts/${appId}/public/data/games`);
            const q = query(gamesRef, where('status', '==', 'approved'));
            onSnapshot(q, (snapshot) => {
                let games = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

                let filteredGames = games.filter(game => {
                    const matchesGenre = genre === 'All' || game.genre === genre;
                    const matchesPlatform = platform === 'All' || game.platform.includes(platform);
                    const matchesSearch = game.title.toLowerCase().includes(searchTerm) || game.description.toLowerCase().includes(searchTerm);
                    return matchesGenre && matchesPlatform && matchesSearch;
                });

                if (sort === 'newest') {
                    filteredGames.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                } else if (sort === 'rating') {
                    filteredGames.sort((a, b) => b.rating - a.rating);
                }

                renderGameCards(filteredGames, 'browse-grid');
            });
        };

    </script>

    <!-- Header -->
    <header class="bg-[#1E2A38] sticky top-0 z-50 shadow-md">
        <nav class="container flex items-center justify-between py-4">
            <a href="#" id="home-btn" class="flex items-center space-x-2 text-2xl font-bold text-[#FF6B35]">
                <span>UPGM</span>
            </a>
            <div class="hidden md:flex items-center space-x-6">
                <a href="#" id="home-btn-nav" class="text-white hover:text-[#FF6B35] transition-colors">Home</a>
                <a href="#" id="browse-btn" class="text-white hover:text-[#FF6B35] transition-colors">Browse</a>
                <a href="#" id="upload-btn" class="text-white hover:text-[#FF6B35] transition-colors hidden">Upload</a>
            </div>
            <div class="flex items-center space-x-4">
                <button id="login-btn" class="btn-primary rounded-full px-6 py-2 transition-colors">Login / Signup</button>
                <button id="user-dashboard-btn" class="btn-secondary rounded-full px-6 py-2 transition-colors hidden">Dashboard</button>
                <button id="logout-btn" class="btn-secondary rounded-full px-6 py-2 transition-colors hidden">Logout</button>
            </div>
        </nav>
    </header>

    <main class="container py-8">
        
        <!-- Home Section -->
        <section id="home-section" class="space-y-12">
            <div class="relative rounded-xl overflow-hidden h-96 card-shadow">
                <img src="https://placehold.co/1200x500/FF6B35/white?text=UPGM+-+Promotional+Banner" alt="Promotional Banner" class="absolute inset-0 w-full h-full object-cover">
                <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"></div>
                <div class="absolute bottom-6 left-6 right-6">
                    <h1 class="text-4xl font-bold text-white drop-shadow-lg">Discover Your Next Favorite Game</h1>
                    <p class="mt-2 text-lg text-gray-200">The home for independent game developers and players.</p>
                </div>
            </div>

            <div class="space-y-6">
                <h2 class="text-3xl font-bold text-white">Featured Games</h2>
                <div id="home-showcase" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Game cards will be dynamically added here -->
                </div>
            </div>
        </section>

        <!-- Browse Section -->
        <section id="browse-section" class="hidden space-y-8">
            <h2 class="text-4xl font-bold text-white text-center">Browse All Games</h2>
            <div class="flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0 sm:space-x-4">
                <input type="text" id="browse-search" placeholder="Search games..." class="flex-grow input-field rounded-full px-4 py-2">
                <div class="flex items-center space-x-2">
                    <label for="sort-by" class="text-gray-400 hidden sm:block">Sort by:</label>
                    <select id="sort-by" class="input-field rounded-full px-4 py-2">
                        <option value="newest">Newest</option>
                        <option value="rating">Top Rated</option>
                    </select>
                </div>
                <div class="flex items-center space-x-2">
                    <label for="genre-filter" class="text-gray-400 hidden sm:block">Genre:</label>
                    <select id="genre-filter" class="input-field rounded-full px-4 py-2">
                        <option value="All">All</option>
                        <option value="Action">Action</option>
                        <option value="RPG">RPG</option>
                        <option value="Horror">Horror</option>
                        <option value="Simulation">Simulation</option>
                    </select>
                </div>
                <div class="flex items-center space-x-2">
                    <label for="platform-filter" class="text-gray-400 hidden sm:block">Platform:</label>
                    <select id="platform-filter" class="input-field rounded-full px-4 py-2">
                        <option value="All">All</option>
                        <option value="Windows">Windows</option>
                        <option value="Mac">Mac</option>
                        <option value="Linux">Linux</option>
                        <option value="Android">Android</option>
                    </select>
                </div>
            </div>
            <div id="browse-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- All game cards will be dynamically added here -->
            </div>
        </section>

        <!-- Game Detail Section -->
        <section id="game-detail-section" class="hidden space-y-8">
            <div class="flex flex-col lg:flex-row lg:space-x-8">
                <div class="lg:w-2/3 space-y-6">
                    <img id="game-cover" class="w-full h-auto rounded-lg card-shadow" src="" alt="Game Cover">
                    
                    <div class="relative youtube-embed rounded-lg overflow-hidden card-shadow">
                        <div id="game-trailer" class="w-full h-full"></div>
                    </div>
                    
                    <div class="space-y-4">
                        <h3 class="text-2xl font-semibold">Screenshots</h3>
                        <div id="game-screenshots" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <!-- Screenshots will be added here -->
                        </div>
                    </div>

                    <div class="space-y-4">
                        <h3 class="text-2xl font-semibold">Description</h3>
                        <p id="game-description" class="text-gray-300 leading-relaxed"></p>
                    </div>
                </div>

                <div class="lg:w-1/3 mt-8 lg:mt-0 space-y-6">
                    <div class="bg-[#2A3749] rounded-lg p-6 card-shadow space-y-4">
                        <h2 id="game-title" class="text-4xl font-bold text-[#FF6B35]"></h2>
                        <p id="game-developer-id" class="text-gray-400 text-sm"></p>
                        <div class="flex items-center space-x-2">
                            <span id="game-rating" class="text-xl font-bold text-yellow-400">⭐ 4.5</span>
                            <span class="text-gray-400">(0 ratings)</span>
                        </div>
                        <p id="game-price" class="text-3xl font-bold mt-4"></p>
                        <a id="download-btn-link" href="#" target="_blank" class="block w-full text-center btn-primary rounded-full px-6 py-3 text-lg font-bold transition-transform transform hover:scale-105"></a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Upload Game Section -->
        <section id="upload-section" class="hidden max-w-2xl mx-auto space-y-8">
            <h2 class="text-4xl font-bold text-center text-white">Upload Your Game</h2>
            <form id="upload-form" class="bg-[#2A3749] p-8 rounded-lg card-shadow space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="title" class="block text-gray-300 mb-2">Game Title</label>
                        <input type="text" id="title" name="title" required class="w-full input-field rounded-lg px-4 py-2">
                    </div>
                    <div>
                        <label for="price" class="block text-gray-300 mb-2">Price (Free or number)</label>
                        <input type="text" id="price" name="price" required class="w-full input-field rounded-lg px-4 py-2">
                    </div>
                </div>
                <div>
                    <label for="description" class="block text-gray-300 mb-2">Description</label>
                    <textarea id="description" name="description" required rows="6" class="w-full input-field rounded-lg px-4 py-2"></textarea>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="genre" class="block text-gray-300 mb-2">Genre</label>
                        <select id="genre" name="genre" required class="w-full input-field rounded-lg px-4 py-2">
                            <option value="Action">Action</option>
                            <option value="RPG">RPG</option>
                            <option value="Horror">Horror</option>
                            <option value="Simulation">Simulation</option>
                            <option value="Casual">Casual</option>
                        </select>
                    </div>
                    <div>
                        <label for="category" class="block text-gray-300 mb-2">Category</label>
                        <select id="category" name="category" required class="w-full input-field rounded-lg px-4 py-2">
                            <option value="PC">PC</option>
                            <option value="Mobile">Mobile</option>
                            <option value="Web">Web</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label for="coverUrl" class="block text-gray-300 mb-2">Cover Image URL</label>
                    <input type="url" id="coverUrl" name="coverUrl" required class="w-full input-field rounded-lg px-4 py-2">
                </div>
                <div>
                    <label for="screenshots" class="block text-gray-300 mb-2">Screenshot URLs (comma-separated, max 5)</label>
                    <input type="text" id="screenshots" name="screenshots" class="w-full input-field rounded-lg px-4 py-2">
                </div>
                <div>
                    <label for="videoUrl" class="block text-gray-300 mb-2">YouTube Trailer URL (embed link)</label>
                    <input type="url" id="videoUrl" name="videoUrl" class="w-full input-field rounded-lg px-4 py-2">
                </div>
                <div>
                    <label for="fileUrl" class="block text-gray-300 mb-2">Game File URL (Download link)</label>
                    <input type="url" id="fileUrl" name="fileUrl" required class="w-full input-field rounded-lg px-4 py-2">
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="version" class="block text-gray-300 mb-2">Version</label>
                        <input type="text" id="version" name="version" class="w-full input-field rounded-lg px-4 py-2">
                    </div>
                    <div>
                        <label for="size" class="block text-gray-300 mb-2">Size (e.g., 500 MB)</label>
                        <input type="text" id="size" name="size" class="w-full input-field rounded-lg px-4 py-2">
                    </div>
                </div>
                <div>
                    <label class="block text-gray-300 mb-2">Platforms</label>
                    <div class="flex flex-wrap gap-4">
                        <label class="flex items-center space-x-2"><input type="checkbox" name="platform[]" value="Windows" class="rounded text-[#FF6B35]"><span>Windows</span></label>
                        <label class="flex items-center space-x-2"><input type="checkbox" name="platform[]" value="Mac" class="rounded text-[#FF6B35]"><span>Mac</span></label>
                        <label class="flex items-center space-x-2"><input type="checkbox" name="platform[]" value="Linux" class="rounded text-[#FF6B35]"><span>Linux</span></label>
                        <label class="flex items-center space-x-2"><input type="checkbox" name="platform[]" value="Android" class="rounded text-[#FF6B35]"><span>Android</span></label>
                        <label class="flex items-center space-x-2"><input type="checkbox" name="platform[]" value="iOS" class="rounded text-[#FF6B35]"><span>iOS</span></label>
                    </div>
                </div>
                <div>
                    <label for="tags" class="block text-gray-300 mb-2">Tags (comma-separated, e.g., Horror, Indie)</label>
                    <input type="text" id="tags" name="tags" class="w-full input-field rounded-lg px-4 py-2">
                </div>
                <button type="submit" class="w-full btn-primary rounded-lg px-6 py-3 font-bold transition-transform transform hover:scale-105">Submit for Review</button>
            </form>
        </section>

        <!-- Login/Signup Section -->
        <section id="login-signup-section" class="hidden max-w-md mx-auto space-y-8">
            <h2 class="text-4xl font-bold text-center text-white">Login to UPGM</h2>
            
            <div id="login-form" class="bg-[#2A3749] p-8 rounded-lg card-shadow space-y-6">
                <div>
                    <label for="login-email" class="block text-gray-300 mb-2">Email</label>
                    <input type="email" id="login-email" name="email" required class="w-full input-field rounded-lg px-4 py-2">
                </div>
                <div>
                    <label for="login-password" class="block text-gray-300 mb-2">Password</label>
                    <input type="password" id="login-password" name="password" required class="w-full input-field rounded-lg px-4 py-2">
                </div>
                <button type="submit" form="login-form" class="w-full btn-primary rounded-lg px-6 py-3 font-bold transition-transform transform hover:scale-105">Login</button>
                <div class="text-center">
                    <button type="button" id="toggle-signup" class="text-[#FF6B35] hover:underline">Don't have an account? Sign up</button>
                </div>
            </div>

            <div id="signup-form" class="bg-[#2A3749] p-8 rounded-lg card-shadow space-y-6 hidden">
                <div>
                    <label for="signup-email" class="block text-gray-300 mb-2">Email</label>
                    <input type="email" id="signup-email" name="email" required class="w-full input-field rounded-lg px-4 py-2">
                </div>
                <div>
                    <label for="signup-password" class="block text-gray-300 mb-2">Password</label>
                    <input type="password" id="signup-password" name="password" required class="w-full input-field rounded-lg px-4 py-2">
                </div>
                <button type="submit" form="signup-form" class="w-full btn-primary rounded-lg px-6 py-3 font-bold transition-transform transform hover:scale-105">Sign up</button>
                <div class="text-center">
                    <button type="button" id="toggle-login" class="text-[#FF6B35] hover:underline">Already have an account? Login</button>
                </div>
            </div>
        </section>

        <!-- User Dashboard Section -->
        <section id="user-dashboard-section" class="hidden max-w-4xl mx-auto space-y-8">
            <h2 class="text-4xl font-bold text-white text-center">My Developer Dashboard</h2>
            <div class="bg-[#2A3749] p-6 rounded-lg card-shadow space-y-4">
                <h3 class="text-xl font-semibold">My Profile</h3>
                <p><strong>User ID:</strong> <span id="user-id-display"></span></p>
                <p><strong>Email:</strong> <span id="user-email-display"></span></p>
                <button id="dashboard-logout-btn" class="btn-secondary rounded-full px-4 py-2">Logout</button>
            </div>
            
            <div class="bg-[#2A3749] p-6 rounded-lg card-shadow space-y-4">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-semibold">My Games</h3>
                    <button class="btn-primary rounded-full px-4 py-2" onclick="renderPage('upload')">Upload New Game</button>
                </div>
                <div id="user-dashboard-games" class="space-y-4">
                    <!-- User games will be dynamically added here -->
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-[#2A3749] py-8 mt-12">
        <div class="container text-center text-gray-400 text-sm">
            <p>&copy; 2025 UPGM. All rights reserved.</p>
            <div class="mt-4 space-x-4">
                <a href="#" class="hover:text-[#FF6B35] transition-colors">Terms of Service</a>
                <a href="#" class="hover:text-[#FF6B35] transition-colors">Privacy Policy</a>
                <a href="#" class="hover:text-[#FF6B35] transition-colors">Contact</a>
            </div>
        </div>
    </footer>
    
    <!-- Custom Modal -->
    <div id="custom-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal()">&times;</span>
            <p id="modal-message" class="text-lg"></p>
            <button onclick="closeModal()" class="mt-4 btn-primary rounded-full px-6 py-2">OK</button>
        </div>
    </div>
</body>
</html>
